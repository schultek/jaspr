import 'package:flutter/material.dart';
import 'dart:async';
import 'dart:math';
import 'package:audioplayers/audioplayers.dart';

void main() => runApp(MathGameApp());

class MathGameApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Ù„Ø¹Ø¨Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©',
      theme: ThemeData(
        primarySwatch: Colors.deepPurple,
        brightness: Brightness.light,
      ),
      home: MathHomePage(),
    );
  }
}

class MathHomePage extends StatefulWidget {
  @override
  _MathHomePageState createState() => _MathHomePageState();
}

class _MathHomePageState extends State<MathHomePage> {
  final Random _random = Random();
  final AudioPlayer _audioPlayer = AudioPlayer();

  int _num1 = 0;
  int _num2 = 0;
  String _operation = '+';
  String _userAnswer = '';
  int _score = 0;
  int _timeLeft = 15;
  Timer? _timer;
  String _difficulty = 'Ø³Ù‡Ù„';

  @override
  void initState() {
    super.initState();
    _generateQuestion();
    _startTimer();
  }

  void _startTimer() {
    _timer?.cancel();
    _timeLeft = 15;
    _timer = Timer.periodic(Duration(seconds: 1), (timer) {
      setState(() {
        _timeLeft--;
      });
      if (_timeLeft <= 0) {
        _showSnackBar('Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! ðŸ˜¢');
        _generateQuestion();
      }
    });
  }

  void _generateQuestion() {
    int maxNumber;
    switch (_difficulty) {
      case 'Ø³Ù‡Ù„':
        maxNumber = 20;
        break;
      case 'Ù…ØªÙˆØ³Ø·':
        maxNumber = 50;
        break;
      case 'ØµØ¹Ø¨':
        maxNumber = 100;
        break;
      default:
        maxNumber = 50;
    }

    setState(() {
      _num1 = _random.nextInt(maxNumber) + 1;
      _num2 = _random.nextInt(maxNumber) + 1;
      List<String> ops = ['+', '-', 'Ã—', 'Ã·'];
      _operation = ops[_random.nextInt(ops.length)];
      if (_operation == 'Ã·') {
        _num1 = _num1 * _num2; // Ù„Ù„Ù‚Ø³Ù…Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©
      }
      _userAnswer = '';
      _startTimer();
    });
  }

  void _checkAnswer() async {
    double correctAnswer;
    switch (_operation) {
      case '+':
        correctAnswer = _num1 + _num2.toDouble();
        break;
      case '-':
        correctAnswer = _num1 - _num2.toDouble();
        break;
      case 'Ã—':
        correctAnswer = _num1 * _num2.toDouble();
        break;
      case 'Ã·':
        correctAnswer = _num1 / _num2;
        break;
      default:
        correctAnswer = 0;
    }

    if (_userAnswer.isNotEmpty && double.tryParse(_userAnswer) == correctAnswer) {
      _score += (_timeLeft > 5) ? 2 : 1;
      await _audioPlayer.play(AssetSource('sounds/correct.mp3'));
      _showSnackBar('Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! ðŸŽ‰');
    } else {
      await _audioPlayer.play(AssetSource('sounds/wrong.mp3'));
      _showSnackBar('Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© ðŸ˜¢ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: $correctAnswer');
    }

    _generateQuestion();
  }

  void _showSnackBar(String message) {
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text(message), duration: Duration(seconds: 1)),
    );
  }

  @override
  void dispose() {
    _timer?.cancel();
    _audioPlayer.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Ù„Ø¹Ø¨Ø© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©'),
        actions: [
          DropdownButton<String>(
            value: _difficulty,
            icon: Icon(Icons.arrow_drop_down, color: Colors.white),
            dropdownColor: Colors.deepPurple,
            underline: SizedBox(),
            onChanged: (String? newValue) {
              setState(() {
                _difficulty = newValue!;
                _generateQuestion();
              });
            },
            items: <String>['Ø³Ù‡Ù„', 'Ù…ØªÙˆØ³Ø·', 'ØµØ¹Ø¨']
                .map<DropdownMenuItem<String>>((String value) {
              return DropdownMenuItem<String>(
                value: value,
                child: Text(value, style: TextStyle(color: Colors.white)),
              );
            }).toList(),
          ),
        ],
      ),
      body: Container(
        decoration: BoxDecoration(
          gradient: LinearGradient(
            colors: [Colors.deepPurple.shade100, Colors.deepPurple.shade300],
            begin: Alignment.topLeft,
            end: Alignment.bottomRight,
          ),
        ),
        padding: const EdgeInsets.all(20.0),
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text('Ø§Ù„Ù†ØªÙŠØ¬Ø©: $_score', style: TextStyle(fontSize: 28, fontWeight: FontWeight.bold)),
            SizedBox(height: 20),
            Text('Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: $_timeLeft Ø«Ø§Ù†ÙŠØ©', style: TextStyle(fontSize: 20, color: Colors.red)),
            SizedBox(height: 40),
            Text('$_num1 $_operation $_num2 = ?', style: TextStyle(fontSize: 36, fontWeight: FontWeight.bold)),
            SizedBox(height: 20),
            TextField(
              keyboardType: TextInputType.number,
              onChanged: (value) => _userAnswer = value,
              decoration: InputDecoration(
                labelText: 'Ø£Ø¯Ø®Ù„ Ø¥Ø¬Ø§Ø¨ØªÙƒ',
                border: OutlineInputBorder(),
                filled: true,
                fillColor: Colors.white70,
              ),
            ),
            SizedBox(height: 20),
            ElevatedButton(
              onPressed: _checkAnswer,
              child: Text('ØªØ­Ù‚Ù‚ âœ…', style: TextStyle(fontSize: 20)),
              style: ElevatedButton.styleFrom(
                padding: EdgeInsets.symmetric(horizontal: 40, vertical: 15),
              ),
            ),
            SizedBox(height: 15),
            ElevatedButton(
              onPressed: _generateQuestion,
              child: Text('Ø³Ø¤Ø§Ù„ Ø¬Ø¯ÙŠØ¯ ðŸ”„', style: TextStyle(fontSize: 18)),
              style: ElevatedButton.styleFrom(
                padding: EdgeInsets.symmetric(horizontal: 30, vertical: 12),
                primary: Colors.deepPurple.shade700,
              ),
            ),
          ],
        ),
      ),
    );
  }
}--
title: Quickstart
description: Get started with Jaspr and build your first website in Dart.
---

---

To get started with Jaspr, you can either use the **Jaspr CLI** or our official **VSCode Extension**. The cli lets you manage the project from the command line, while the extension provides a more integrated experience within your IDE.

## VSCode Extension

<Steps>
  <Step title="Install Extension">
    Install the Jaspr VSCode extension by searching for `Jaspr` in the extensions menu.
  </Step>
  <Step title="Create a Project">
    To create a new Jaspr project, open the command palette (`Ctrl+Shift+P`) and select **Jaspr: New Project**. You are ask to choose from several templates and set a project folder.

    ![New Project](https://github.com/schultek/jaspr/blob/main/modules/jaspr-code/media/screenshots/new_project.png?raw=true)

    <Info>
      Choosing a template will not lock you into a specific configuration. Starting from one template you can easily modify your code to behave as any other template along the way.
    </Info>

    When running for the first time, the extension will ask you to install the Jaspr CLI. This is required to run the Jaspr development server and build your project.
    
  </Step>
  <Step title="Debug your Jaspr Project">
    To run and debug a Jaspr applications, launch it using F5 or the Debug menu. The extension will start the debug process and attach the Dart debugger to it. 

    ---

    When developing a Jaspr project in `static` or `server` mode, this will open **two** separate debugging sessions, one for the server and one for the client. Switch between the two using the debugging sidebar or process dropdown.

    | Sidebar | Dropdown.Â |
    |---|---|
    | ![Sidebar](https://github.com/schultek/jaspr/blob/main/modules/jaspr-code/media/screenshots/sidebar.png?raw=true) | ![Dropdown](https://github.com/schultek/jaspr/blob/main/modules/jaspr-code/media/screenshots/dropdown.png?raw=true)

    Both processes will be managed by the main Jaspr terminal.

    ![Terminal](https://github.com/schultek/jaspr/blob/main/modules/jaspr-code/media/screenshots/terminal.png?raw=true)

    To stop the server, click "Stop Jaspr" in the status bar, or focus the terminal and press `Ctrl+C`. This will stop both debugging sessions and the main process.
    You can also detach the debugging sessions individually using the detach button in the debug bar, but this will keep the app running.

  </Step>
</Steps>

You can now start developing your website. ðŸŽ‰

<Success>
  Observe that the browser automatically refreshes the page when you change something in your code, like the `Welcome` text.
</Success>

---

## Jaspr CLI
    
<Steps>
  <Step title="Install CLI">
    Install the Jaspr CLI via:

    ```js
    dart pub global activate jaspr_cli
    ```

    The `jaspr` command will be available in your terminal.
  </Step>
  <Step title="Create a Project">
    To create a new project run:

    ```
    jaspr create my_website
    ```

    This will walk you through the setup wizard and create a new Jaspr project inside the `my_website` folder.

    The cli will prompt you with a set of options to configure your project. You can read about what each option does [below](/get_started/quick_start#project-options) or just start with the recommended ones (simply press **Enter** each time).

    <Info>
        If you are just starting out and are not sure what options to pick, just select the default one for each question
        (simply press **Enter** each time).
    </Info>

    <Info>
        Choosing a set of options do not lock you into a specific configuration. Starting from one setup you can easily
        modify your code to behave as any other setup along the way.
    </Info>
  </Step>
  <Step title="Run the Development Server">
    Start the development server via:

    ```shell
    cd my_website
    jaspr serve
    ```

    This will spin up a development server at `localhost:8080`.
  </Step>
</Steps>

You can now start developing your website. ðŸŽ‰

<Success>
  Observe that the browser automatically refreshes the page when you change something in your code, like the `Welcome` text.
</Success>

### Project Options

When creating a new project through the **Jaspr CLI**, you will go through a set of questions to configure the project to your liking. The options set your rendering mode, hydration strategy, routing, flutter interoperability strategy and more.

You can choose from the following options:

<Property name="Rendering Mode">
  Select one of the three rendering modes Jaspr supports. Read about the different modes [here](/get_started/modes).
</Property>

---

<Property name="Hydration" type="conditional">
  Select the hydration strategy (automatic or manual). Read about hydration [here](/concepts/hydration).
</Property>

---

<Property name="Routing">
  Whether to set up routing. Selecting **Yes** will setup a basic `Routing` with two routes ('/home' and '/about'). This gives you a convenient
  starting point when you plan to develop a website with multiple 
