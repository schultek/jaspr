---
title: Taxonomy
description: Classify content with taxonomies like tags and categories.
---

---

Taxonomies let you classify content using frontmatter fields like **tags** or **categories**. The `TaxonomyLoader` scans your content files, extracts all unique terms, and generates pages for each one. The `TaxonomyContext` extension then lets you query this data from within component builders.

---

For example, given blog posts with a `tags` field in their frontmatter:

```markdown title="content/posts/hello-world.md"
---
title: Hello World
tags: [dart, jaspr]
---

Welcome to my blog!
```

The `TaxonomyLoader` will discover the terms "dart" and "jaspr" and generate pages at `/tags/dart` and `/tags/jaspr`.

## Setup

Add a `TaxonomyLoader` alongside your other loaders using `ContentApp.custom()`. Eager loading must be enabled for the taxonomy context extensions to work.

```dart
ContentApp.custom(
  eagerlyLoadAllPages: true,
  loaders: [
    FilesystemLoader('content'),
    TaxonomyLoader(
      taxonomy: 'tags',
      termPageBuilder: (context, taxonomy, term) {
        return h1([text('Posts tagged: $term')]);
      },
    ),
  ],
  configResolver: PageConfig.all(
    // ... your config
  ),
);
```

## TaxonomyLoader

The `TaxonomyLoader` scans content files for a frontmatter field matching the given taxonomy name, extracts all unique values (terms), and generates in-memory pages for each one.

Terms are normalized to lowercase with spaces replaced by dashes (e.g., "My Tag" becomes "my-tag").

<Card title="Properties" icon="sliders">
  <Property name="taxonomy" type="String" required>
    The frontmatter key to extract terms from (e.g., `'tags'`, `'categories'`).
  </Property>

  ---

  <Property name="termPageBuilder" type="TaxonomyTermPageBuilder" required>
    Builder function for individual term pages. Receives the `BuildContext`, the taxonomy name, and the normalized term string.
  </Property>

  ---

  <Property name="directory" type="String">
    The directory to scan for content files. Defaults to `'content'`.
  </Property>

  ---

  <Property name="taxonomySlug" type="String?">
    The URL slug for the taxonomy index page. Defaults to the taxonomy name.
    For example, with `taxonomy: 'tags'` and `taxonomySlug: 'labels'`, the index page is generated at `/labels/` instead of `/tags/`.
  </Property>

  ---

  <Property name="taxonomyPageBuilder" type="TaxonomyPageBuilder?">
    Optional builder for the taxonomy index page. Receives the `BuildContext` and the taxonomy name. If not provided, no index page is generated.
  </Property>

  ---

  <Property name="taxonomyInitialDataBuilder" type="TaxonomyInitialDataBuilder?">
    Optional function to provide initial data for the taxonomy index page. Receives the taxonomy name.
  </Property>

  ---

  <Property name="termSlug" type="String?">
    The URL slug for individual term pages. Defaults to the taxonomy name.
    For example, with `taxonomy: 'tags'` and `termSlug: 'tag'`, term pages are generated at `/tag/dart` instead of `/tags/dart`.
  </Property>

  ---

  <Property name="initialTermDataBuilder" type="TaxonomyTermInitialDataBuilder?">
    Optional function to provide initial data for each term page. Receives the taxonomy name and the normalized term string.
  </Property>

  ---

  <Property name="supportedExtensions" type="List&lt;String&gt;">
    File extensions to scan for frontmatter. Defaults to `['.md', '.html']`.
  </Property>
</Card>

## Context Extensions

The `TaxonomyContext` extension on `BuildContext` provides methods to query taxonomy data from within component builders.

<Info>
These methods require **eager loading** to be enabled (`eagerlyLoadAllPages: true`), as they depend on `context.pages` being fully populated.
</Info>

### taxonomyTermPages

Returns all term pages for the given taxonomy. The taxonomy index page is excluded.

```dart
termPageBuilder: (context, taxonomy, term) {
  // Get all term pages for the 'tags' taxonomy.
  final termPages = context.taxonomyTermPages('tags');
  // Each page corresponds to a unique tag.
}
```

### taxonomyTermPage

Returns the term page for a specific taxonomy and term, or `null` if no such page exists. The term is normalized before matching, so both `'Dart'` and `'dart'` will find the same page.

```dart
termPageBuilder: (context, taxonomy, term) {
  // Get the page for the 'dart' tag.
  final dartPage = context.taxonomyTermPage('tags', 'dart');
  if (dartPage != null) {
    // Link to the dart tag page.
    return a(href: dartPage.url, [text('Dart')]);
  }
}
```

### pagesForTerm

Returns all content pages that have the given term in their frontmatter taxonomy field. Taxonomy pages themselves are excluded.

```dart
termPageBuilder: (context, taxonomy, term) {
  // Get all blog posts tagged with this term.
  final posts = context.pagesForTerm(taxonomy, term);
  return ul([
    for (final post in posts)
      li([a(href: post.url, [text(post.data.page['title'] as String)])]),
  ]);
}
```

### taxonomyTermPagesWithCount

Returns a map of term pages to their content page counts. Each key is a term `Page` and each value is the number of content pages with that term. Only terms that have a corresponding term page are included.

Use the `TaxonomyPage` extension (`.taxonomyTerm`) to access the term name from each page key.

```dart
taxonomyPageBuilder: (context, taxonomy) {
  final tagCloud = context.taxonomyTermPagesWithCount(taxonomy);
  return div([
    for (final MapEntry(:key, :value) in tagCloud.entries)
      a(href: key.url, [text('${key.taxonomyTerm} ($value)')]),
  ]);
}
```

## TaxonomyPage Extension

The `TaxonomyPage` extension on `Page` provides convenient getters to access taxonomy metadata from pages created by `TaxonomyLoader`.

- **`page.taxonomy`** — Returns the taxonomy name (e.g., `'tags'`), or `null` if not a taxonomy page.
- **`page.taxonomyTerm`** — Returns the term name (e.g., `'dart'`), or `null` if not a term page.

```dart
final termPages = context.taxonomyTermPages('tags');
for (final page in termPages) {
  // page.taxonomy == 'tags'
  // page.taxonomyTerm == 'dart', 'flutter', etc.
  // page.url == '/tags/dart', '/tags/flutter', etc.
}
```

## Full Example

Here is a complete example setting up a tags taxonomy with an index page showing a tag cloud and individual term pages listing tagged posts:

```dart
ContentApp.custom(
  eagerlyLoadAllPages: true,
  loaders: [
    FilesystemLoader('content'),
    TaxonomyLoader(
      taxonomy: 'tags',
      // Index page at /tags/ listing all tags with counts.
      taxonomyPageBuilder: (context, taxonomy) {
        final tagCloud = context.taxonomyTermPagesWithCount(taxonomy);
        return div(classes: 'tag-cloud', [
          for (final MapEntry(:key, :value) in tagCloud.entries)
            a(href: key.url, [text('${key.taxonomyTerm} ($value)')]),
        ]);
      },
      // Individual term pages at /tags/{term}.
      termPageBuilder: (context, taxonomy, term) {
        final posts = context.pagesForTerm(taxonomy, term);
        return div([
          h1([text('Posts tagged: $term')]),
          ul([
            for (final post in posts)
              li([
                a(href: post.url, [text(post.data.page['title'] as String)]),
              ]),
          ]),
        ]);
      },
    ),
  ],
  configResolver: PageConfig.all(
    enableFrontmatter: true,
    parsers: [MarkdownParser()],
  ),
);
```
